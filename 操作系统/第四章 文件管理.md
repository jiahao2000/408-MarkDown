# 第四章 文件管理

## 文件系统基础

### 文件的属性
1. 文件名：统一文件夹下不能有同名文件
1. 标识符：一个系统内的标识符是唯一的，对用户完全不具有可读性，只是用于区分各个文件的
1. 类型：指明文件类型
1. 位置：文件存放路径(用户使用)，在外存中的地址(OS使用)
1. 创建时间
1. 上次修改时间
1. 文件所有者信息
1. 保护信息：对文件进行保护的访问控制信息


### 文件内部数据如何组织
1. 无结构文件
1. 有结构文件

### 文件之间如何组织
文件目录

### 操作系统提供哪些功能
1. 创建文件('create'系统调用)
1. 读文件(read 系统调用)
1. 写文件(write 系统调用)
1. 删除文件(delete 系统调用)
1. 打开文件(open):读写之前，需要打开文件
1. 关闭文件(close)：读写结束后，需要关闭文件

可以用几个基本操作实现复杂功能

### 文件应如何放在外存中
磁盘块
逻辑地址 物理地址
文件的物理结构

### 操作系统需要提供的其他文件管理功能
1. 文件共享
1. 文件保护


## 文件的逻辑结构

1. 无结构文件(流式文件)
1. 有结构文件(记录式文件)记录可以分为定长记录和可变长记录两种
    1. 顺序文件：记录一个接一个的顺序排列，记录可以变长也可以定长，可以使用链式存储(无法随机存取)或顺序存储(可变长记录不能随机存取，定长记录可以随机存取；串结构无法快速找到某关键字对应的记录，顺序结构可以快速找到（折半查找）)
        1. 串结构：记录之间的顺序与关键字无关
        1. 顺序结构：记录之间的顺序按关键字顺序排列
        
    一般来说：顺序文件是指物理上顺序存储的顺序文件
    1. 索引文件：使可变长记录可以随机存取
        引入了索引表：本身是定长记录的顺序文件
        可以用多个数据项为文件建立多个索引表
    1. 索引顺序文件
        给记录分组，每个分组对应一个索引项。
        索引顺序文件的索引表实际是一个定长记录的串结构的顺序文件
        多级索引顺序文件

## 文件控制块

目录文件中的一个记录就是一个文件控制块(FCB)

需要对目录进行哪些操作：
1. 搜索
1. 创建文件
1. 删除文件
1. 显示目录


### 目录结构
1. 单级目录：不允许文件重名
1. 两级目录结构：分为主文件目录和用户文件目录
1. 多级目录结构：绝对路径，相对路径
1. 无环图目录结构：共享计数器：

### 索引结点
外存中的索引节点称为磁盘索引结点
内存中的索引结点称为内存索引节点
